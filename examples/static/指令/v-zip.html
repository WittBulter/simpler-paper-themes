<h2 id="-">压缩图片指令</h2>
<h3 id="-">为什么有这个指令</h3>
<p>当前图片压缩需求虽然不多，但每次都需要写很多累赘的逻辑，为了缩减代码量，保持同类型库聚合的风格增加了这个指令。
它依赖的是 <code>compressor</code>，考虑到我们只会在业务场景中使用，这里把库转化成更便捷直观的指令模式</p>
<h3 id="-">使用</h3>
<p><code>v-zip</code> 只能够被用作在 <code>&lt;input type=&quot;file&quot; &gt;</code> 中，它在每次选取图片时增加过滤 (压缩) 效果。
当图片的大小超过设定的压缩阈值时，则会被压缩到刚好满足阈值的大小。
如果图片被压缩的质量过低，可以使用质量阈值控制。</p>
<ol>
<li>指令绑定的内容是函数，第一个参数是原生事件，第二个则是处理后的图片。</li>
<li>一次选取多张图片时 (如果允许)，回调函数将触发多次，第二个图片参数始终是对象而非数组。</li>
<li>压缩失败时 (图片超大、未达到限制、压缩出错等) 将返回原图片。</li>
</ol>
<pre><code class="lang-js">import { ZipObserver } from &#39;howl-theme&#39;

&lt;input type=&quot;file&quot; v-zip=&quot;handle&quot; accept=&quot;image/*&quot;&gt;

handle(event: Event, file: FileObject) {}
</code></pre>
<h3 id="-">参数</h3>
<p>参数只能在加载时统一设置:</p>
<pre><code class="lang-ts">type options = {
  // 达到指定大小时开始压缩图片 默认: 2000000
  limit?: number,
  // 最小压缩质量 (最大压缩率)，图片超大时，图片质量损失的阈值 默认: 0.4
  minQuality?: float,
  // 阻断 任何错误或压缩未达到标准都将被抛弃，不返回任何结果 (不调用绑定的函数)
  obstruct?: bool,
}
</code></pre>
